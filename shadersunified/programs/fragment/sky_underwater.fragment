KCBBegin(SKY_CB)
  KUniformV(KFloat4, skyColor, KFloat4(0.0,1.0,0.0,1.0))
  KUniformV(KFloat, skyAlpha, 1.0)
  KUniformV(KFloat, timeOfDay, 12.0)
KCBEnd

KPDataBegin
  KPDataPosition( KFloat4, Pos, SV_POSITION)
  KPDataInOut( KFloat2, texCoord0, TEXCOORD0)
  KPDataInOut( KFloat, fogDarkCoeff, TEXCOORD1)
  KPDataOutColor
KPDataEnd

KPSMain(SkyUnderwaterPS)
{
  KFloat4 fogColor = KLerp(darkFogColor, lightFogColor, KInput(fogDarkCoeff));
  fogColor.w = 1.0;
  
  KPSOutput(fogColor);
}